import json
import logging
import sys
import os

log = logging.getLogger(__name__)


class EntryPoints(object):

    def __init__(self, datastore):
        """ Class to handle [job_path]/workflow/datastore.json """
        self.data = datastore

    @classmethod
    def from_job_path(cls, job_path):
        "Use job_path to resolve datastore.json"
        datastore = os.path.join(job_path, 'workflow/entry-points.json')

        with open(datastore) as f:
            data = json.load(f)
        return cls(data)

    @property
    def reference_path(self):
        return self.data['eid_ref_dataset']


def main():
    job_path = '/home/gconcepcion/p4/mainline/software/smrtanalysis/siv/testkit-jobs/sa3_pipelines/resequencing/ecoli_2590956_0003_P6C4/job_output'

    ds = EntryPoints.from_job_path(job_path)
    print ds.reference_path


if __name__ == "__main__":
    sys.exit(main())
