#! python

"""
Define default parameters for IsoSeq3 workspace.
"""

from collections import namedtuple
PARAM = namedtuple('PARAM', ['name', 'val', 'type', 'display_name', 'desc'])

SAMPLE_NAME = PARAM("sample_name", '', str, "Sample Name", "Sample Name, Only Allow Digits and Letters")
MISC_PARAMS = [SAMPLE_NAME]

"""Define Collapsing params as constans"""
MIN_ALN_COVERAGE = PARAM("min_aln_coverage", 0.99, float, "Min pbmm2 Alignment Query Coverage",
                         "Minimum Query Coverage to Analyze an Alignment")
MIN_ALN_IDENTITY = PARAM("min_aln_identity", 0.95, float, "Min pbmm2 Alignment Identity",
                         "Minimum Identity to analyze an Alignment")
MAX_FUZZY_JUNCTION = PARAM("max_fuzzy_junction", 5, int, "Maximum fuzzy junction difference",
                           "Maximum Edit Distance between Merge-able Fuzzy Junctions")
ALLOW_EXTRA_5EXON = PARAM("allow_extra_5exon", False, bool, "Allow 5' shorter transcripts",
                          "True: Collapse shorter 5' transcripts. False: Don't collapse shorter 5' transcripts")
MIN_FL_COUNT = PARAM("min_fl_count", 2, int, "Min FLNC count to not filter collpased isoform",
                     "Minimum number of FLNC reads to not filter a collapsed isoform")

# Do *NOT* expose the following params to SMRTLink users
# MIN_COLLAPSE_FLNC_COVERAGE must always be 1 in production IsoSeq3 pipeline,
# as it does not directly collapse FLNC reads, rather it collapsed HQ isoforms
# and each HQ isoform has at least two supportive FLNC reads.
MIN_COLLAPSE_FLNC_COVERAGE = PARAM("min_collapse_flnc_coverage", 1, int, "Min aligned FLNC reads to call collapse",
                                   "Only used for aligned FLNC reads, otherwise, result undefined")
# SKIP_5_EXON_ALT must always be False for production IsoSeq3 pipeline
SKIP_5_EXON_ALT = PARAM("skip_5_exon_alt", False, bool, "Skip 5' Exon Alternatives", "Skip 5' Exon Alternatives")
# FILTER_OUT_SUBSETS must always be True for production IsoSeq3 pipeline
# FILTER_OUT_SUBSETS = PARAM("filter_out_subsets", True, bool, "Filter Out Subset Transcripts", "Filter Out Collapsed Isoforms which are a Subset of another Isoform")
